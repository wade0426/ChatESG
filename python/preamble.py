"""
Install the Google AI Python SDK

$ pip install google-generativeai
"""

import os
from dotenv import load_dotenv
import google.generativeai as genai
import json

load_dotenv()

api_key = os.getenv("GEMINI_API_KEY")
genai.configure(api_key=api_key)

# Create the model
generation_config = {
  "temperature": 1,
  "top_p": 0.95,
  "top_k": 64,
  "max_output_tokens": 8192,
  "response_mime_type": "text/plain",
}

model = genai.GenerativeModel(
  model_name="gemini-1.5-pro",
  generation_config=generation_config, # type: ignore
  # safety_settings = Adjust safety settings
  # See https://ai.google.dev/gemini-api/docs/safety-settings
)

def preamble(input_text, info_str="", preamble_str=""):
    print("*前言*生成中...")
    # response = model.generate_content([input_text])
    response = model.generate_content([
    "格式參照範本(output)輸出 不要有 ## 和 **, 不要有奇怪的換行。",
    "input: 公司名稱 遠東商銀 報告年度 2022年 關鍵成就與獎項 在2022年，遠東商銀憑藉著卓越的企業永續實踐，成功晉級至第八屆公司治理評鑑的上市公司組表現前5%旗艦群。此外，公司持續入選臺灣永續指數、臺灣高薪100指數及臺灣就業99指數。遠東商銀亦榮獲臺灣永續獎中的人才發展領袖獎，並連續獲得國際人力資源專業期刊《HR Asia》評選為亞洲最佳企業雇主。 永續發展措施 遠東商銀在2022年簽署了赤道原則，展現了公司在推動國際綠色融資方面的堅定決心。公司持續擴展綠色商品線，包括推出建築房貸優惠及ESG基金申購優惠，並計劃以環保回收材質製作員工制服，進一步推動綠色採購。此外，公司亦透過其金融專業影響力，助力金流導向綠色經濟的發展，努力建立資本和產業的綠色生態圈。 社會責任行動 遠東商銀積極參與公益活動，連續19年發行人文美學月曆，宣揚臺灣的文化建設，並倡導在生活中置入藝術的態度。此外，公司與伊甸基金會合作，持續25年穩定捐款，並在2022年新增互動式捐款裝置，巡迴全臺遠東百貨，以募集群眾愛心，成為企業與非營利組織建立長期夥伴關係的典範。 未來承諾 遠東商銀將繼續以永續經營為舵，以穩健成長為槳，從治理與管理團隊以身作則開始，深化公司文化價值。在未來，公司將持續以公司治理、客戶信任、幸福職場、環境永續、人文美學公益等主軸，提升營運競爭力並深耕ESG基本功，為更好的社會與地球而努力。",
    "output: 在新冠疫情逐漸成為過去式的同時，世界卻迎來前所未有的變局。國際政經局勢動盪、氣候變遷加劇，人類社會正邁入一個充滿挑戰的時代。在這樣的背景下，企業更需積極發揮影響力，承擔社會責任，與所有利害關係人攜手打造永續未來。\\n\\n遠東商銀始終相信，永續經營不只是營運策略，更是企業的核心價值。2022年，遠東商銀正式展開企業永續委員會的運作，確立董事會及高階管理層級對環境、社會相關議題的治理責任。我們深耕ESG，致力於公司治理、客戶信任、幸福職場、環境永續、人文美學公益五大面向，並積極參與國際倡議，於2022年簽署赤道原則，展現推動綠色金融的決心。\\n\\n遠東商銀持續擴展綠色商品線，包括推出建築房貸優惠、ESG基金申購優惠，並規劃以環保回收材質製作員工制服，擴大綠色採購的邊界。此外，我們也持續推動多項嘉惠中小型企業與個人的普惠金融服務，致力於打造一個資本和產業的綠色生態圈。\\n\\n在社會公益方面，遠東商銀長期投入資源，連續19年發行人文美學月曆，宣導政府的文化建設，並倡導將藝術融入生活。我們也與伊甸基金會合作，持續25年穩定捐款，並於2022年新增互動式捐款裝置，巡迴全台遠東百貨募集愛心，成為企業與非營利組織長期合作的典範。\\n\\n展望未來，遠東商銀將以永續經營為舵，以穩健成長為槳，持續深化公司文化價值，提升營運競爭力，並深耕ESG基本功，與所有利害關係人攜手共創更美好的社會與環境，為地球的永續發展貢獻心力。",
    "input: 公司名稱 京城銀行 報告年度 2022年 關鍵成就與獎項 2022年，公司在治理經營上獲得多項肯定，例如連續五年（2018～2022）獲得臺灣證交所「公司治理評鑑」前5%，並且在金融保險業的產業排名中名列前茅。此外，獲得了Newsweek周刊「World’s Most Socially Responsible Banks 2022」獎項及2022年TCSA永續報告書金融及保險業第一類金級。 永續發展措施 公司在2022年正式成為「赤道協會」成員，並持續深化氣候風險管理與永續發展措施。此外，公司在2022年已達成2017年設立的減碳、節電與節水目標，並制定了未來的短中長期計劃，以逐步實現「2050淨零排放」。 社會責任行動 公司積極參與社區關懷活動，推動性別平權等友善機制，並連續三年（2021～2023）入選彭博性別指數。此外，公司推出「京寶貝」方案，鼓勵員工生育，並與政府機關、在地組織合作推動金融教育、節能倡議等在地多元活動。 未來承諾 未來，公司將繼續以全球化的思維與在地化的行動推動永續發展，並在氣候行動中扮演關鍵角色，持續加速能源轉型，實現更為永續、低碳的經濟模式。",
    "output: 2022 年，這是一個挑戰與機遇並存的一年。我們已漸漸學會與疫情 共處之時，卻在年初爆發烏俄戰爭，戰火的延燒不僅衍生出人道議 題，因戰爭導致油氣能源供應緊缺，也使能源安全議題被帶到政治 議程討論的最前線。歐洲主要國家在優先考量「能源安全」與「可負 擔性」下，被迫重啟燃煤發電或是延長核電廠服役期限。全球減碳腳 步受阻之際，極端氣候災難依舊在各地紛傳，乾旱、洪水、颶風、熱浪， 發生頻率增加、災害等級更甚以往；巴基斯坦洪災淹沒將近三分之一 的國土，伊恩颶風造成數萬人流離失所，極端高溫導致世界各地發生 乾旱、農產減少，進一步增加糧食價格與安全壓力。全球公民正面臨 嚴峻的抉擇點，政治局勢動盪與氣候急遽變遷，考驗著世界各國政 府、企業的減碳承諾與氣候行動。然而也因為面臨這樣的挑戰，凸顯 出加速能源轉型至乾淨能源、擺脫化石燃料依賴、再生能源多元化， 是當前最迫切、優先的任務。 金融業身為資金提供者，在氣候行動中擔任著關鍵角色，有 責任採取更積極的作為並協同企業、其他利害關係人一同減輕對環 境的影響。除了「氣候」成為永續發展中的重中之重，我們也意識到「永 續發展」對於其他領域的影響也正不斷擴大，為此我們的永續發展聚 焦於下列幾個面向：規劃氣候變遷策略、實踐環境管理政策 面對氣候變遷，已於 2021 年 7 月簽署支持氣候相關財務揭 露（Task Force on Climate-related Financial Disclosure, TCFD）， 並參考 TCFD 架構依治理、策略與風險管理、指標和目標四大範疇進 行揭露。我們也不斷持續深化揭露的內容，並依據分析結果擬定策 略與精進氣候風險管理，提高各利害關係人對氣候相關機會與風險 的認識和理解。並在 2022 年底正式成為「赤道協會」成員，透過在 授信過程中納入對環境與社會風險的判斷、評估與控管，與我們的 客戶共同轉向更為永續、低碳的經濟型態。除了發揮金融影響力，在 營運環境管理方面，我們於 2022 年已順利達成 2017 年設下的各項 減碳、節電與節水目標，並再次制定短中長期計畫，透過四大策略以 期逐步達成「2050 淨零排放」。 深耕在地社區關懷、注重多元人權平等 新冠疫情加速推動數位的運用，但也凸顯特定社會議題，例如：疫情 造成工作機會變少或小孩需要照顧，被迫退出職場的大多是女性、 勞動力邁向老齡化、當人工智能應用層面進一步擴大時，什麼是人類 無可取代的價值？身為臺南在地企業，以「在地關懷」為出 發點並積極建構性別平權等友善機制，已連續三年（2021 ～ 2023） 入選彭博性別指數，並於 2022 年 10 月推出「京寶貝」方案，主打階 梯式加碼生育獎勵－『生越多每月補貼金額越高』，期盼讓員工「放 心生、安心養」、帶動當地長遠繁榮。在社會面，以「學術教育」、「關 懷弱勢」、「人文藝術」為三大基礎，透過各分行力量與政府機關、在 地組織攜手合作反詐騙宣導、金融教育、節能倡議以及節慶關懷等 在地多元活動。我們認為數位與科技提升了效率，也讓我們有更多 的時間展現「溫度」與「彈性」，這也是我們的價值所在。 強化公司經營治理、深化永續發展目標 在充滿不 確 定性與不安全感的 2022 年，更彰顯公司治理 與風險 管理的重要。在本公司穩紮穩打的步調上，我們連續五年（2018 ～ 2022）獲頒臺灣證交所「公司治理評鑑」前 5%，且在產業別－金融 保險類排名級距列為 10%，亦獲得 Newsweek 周刊 World’s Most Socially Responsible Banks 2022 獎 項肯定以 及 2022 年 TCSA 永 續報告書金融及保險業第一類金級，在在顯示主管機關及社會大眾 對於本行治理經營的高度肯定。在永續發展目標上，以實踐「在地的 感動」為使命，在 SDG4 優質教育、SDG5 性別平等、SDG7 可負擔能 源、SDG8 就業與經濟成長、SDG10 減少不平等、SDG12 責任消費與 生產、SDG13 氣候行動以及 SDG16 和平與正義制度等八大目標上均 有顯著的亮點，體現本公司誠懇踏實的精神，以及確切落實企業經營 者之責任。 誠摯感謝大家與共同走過第七十五個年頭，將持 續以全球化的思維與在地化的行動，與大家並肩同行、與之成長，如 同鳳凰樹一般，植根於卓越、茁壯於熱忱。",
    "input: 報告年度 2022年 關鍵成就與獎項 2022年，本公司在全球及臺灣的永續發展領域中表現卓越。公司連續三年獲選道瓊永續指數世界指數 (DJSI World) 及新興市場指數 (DJSI Emerging Markets) 成分股，在所屬產業類中全球排名第四，全台排名第一。此外，公司連續六年入選倫敦富時社會責任指數 (FTSE4Good Emerging Market Index) 及臺灣永續指數 (FTSE4Good TIP Taiwan ESG Index)。公司也持續入選「公司治理100指數」，並蟬聯九年「高薪100指數」和「就業99指數」成分股。 永續發展措施 公司在2021年提出「2045年全資產組合淨零碳排」的承諾，成為全台首家承諾提前5年達成淨零目標的金融機構。為實現此目標，公司導入綠電轉供，並與今周刊共同發布「中小企業減碳調查」，舉辦減碳論壇，協助中小企業綠色轉型。公司也落實金管會「綠色金融行動方案3.0」，包括責任投資政策、永續授信原則及氣候風險管理準則等，並計劃與合作夥伴共同成立綠能公司，推動綠能產業的發展。 社會責任行動 公司長期推動永續社會發展，透過教育扶助專案幫助偏鄉與弱勢學童，並於2021年啟動「共融力計畫」，深入地方鄉鎮協助建立支持系統。2022年，集團志工服務總時數達77,660小時，成長120%，創歷年新高。公司也獲得「TCSA台灣企業永續獎台灣百大永續典範企業獎」及「TCSA台灣企業永續獎-資訊安全領袖獎」，並首度獲得CDP國際碳揭露專案（CDP）氣候變遷最高A級領導等級殊榮。 未來承諾 展望2023年，公司將繼續專注於治理、環境、社會三方面的機制，保持長期穩健發展。公司將致力於維持穩定的發展，提供更具永續韌性的綠色金融服務，並持續與各方利害關係人分享永續議題推動成果及未來目標。",
    "output: 2022年，全球經濟逐漸從新冠疫情的陰影中復甦，永續發展成為企業經營的關鍵議題。我們深信，唯有將永續思維融入企業DNA，才能在變局中站穩腳步，並為世界創造更美好的未來。\\n\\n我們致力於實踐五大永續策略：擘劃永續治理、智慧永續金融、菁英永續人才、低碳永續環境、共創永續社會。憑藉著全體同仁的努力，我們在永續發展領域屢獲佳績，連續三年同時獲列道瓊永續指數世界指數及新興市場指數成分股，總體分數更於所屬產業類別中名列全球第四、全台第一，並獲得S&P標準普爾永續年鑑產業Top 5%肯定，顯見我們在公司治理、員工照顧、吸引人才、環境保護、社會參與等面向的卓越表現。\\n\\n為落實「2045年全資產組合淨零碳排」的承諾，我們積極導入綠電轉供，並與今周刊共同發布「中小企業減碳調查」，舉辦減碳論壇，協助中小企業綠色轉型。此外，我們也落實金管會「綠色金融行動方案3.0」，並規劃與合作夥伴共同成立綠能公司，推動綠能產業的發展，展現我們對環境永續的承諾。\\n\\n我們長期推動永續社會發展，透過教育扶助專案幫助偏鄉與弱勢學童，並於2021年啟動「共融力計畫」，深入地方鄉鎮協助建立支持系統，縮短城鄉差距。2022年，集團志工服務總時數達77,660小時，成長120%，創下歷史新高，展現我們對社會參與的熱忱。\\n\\n展望2023年，我們將繼續專注於治理、環境、社會三方面的機制，專注執行核心策略，維持長期穩健發展，並持續與各方利害關係人分享永續議題推動成果及未來目標。我們深信，唯有攜手合作，才能共創更美好的未來，為地球的永續發展貢獻心力。",
    f"input: {preamble_str},{input_text}",
    "output: ",
    ])

    return response.text
    
# print(preamble("""aaa"""))
# print(preamble("""公司名稱 彰化銀行 報告年度 2022年  願景 我們致力於成為永續金融的領航者，並以實際行動促進經濟、社會和環境的平衡發展。 策略方針 我們依循聯合國永續發展目標(SDGs)和國際永續準則，制定了涵蓋環境、社會和治理(ESG)三大面向的永續發展策略。 關鍵成就  * 完成ISO 14064-1溫室氣體盤查，涵蓋範圍達100%。 * 簽署科學基礎減碳目標倡議(SBTi)，承諾2030年達成範疇1和2碳排放升溫控制在1.5°C內。 * 彰化分行完成碳中和轉型，並取得PAS 2060碳中和查證。 * 簽署赤道原則，將ESG指標納入授信審核流程。 * 發行可持續發展債券，支持綠色產業發展。 未來展望  我們將持續精進ESG各面向的作為，並積極與利害關係人溝通合作，共同創造更美好的未來。"""))

# output = preamble("""公司名稱 彰化銀行
# 報告年度 2022年
# 關鍵成就與獎項 
# 2022年，彰化銀行在公司治理、環境永續和社會責任方面取得了顯著成就。公司強化了審計委員會的財務監督職能，定期進行董事會(含功能性委員會)績效評估，提高了資訊揭露品質，並強化了風險治理。此外，彰化銀行在環境保護方面也取得了重大進展，取得了ISO14064-1溫室氣體排放量盤查證書，完成了所有國內、海外據點及子公司的盤查，涵蓋邊界達100%。同時，彰化銀行積極參與社會公益活動，持續與華山基金會合作舉辦關懷長者捐贈方案，並連續7年捐助臺東縣體育會「各單項運動委員會績優及具有潛力選手培訓計畫」。

# 永續發展措施 
# 彰化銀行在2022年提出了「4C 永續願景」，即科學減碳 (Carbon)、責任投資 (Capital)、盡職授信 (Credit) 及普惠金融 (Customer)，旨在從內而外驅動 ESG 全方位發展。為實現這一願景，彰化銀行積極制定階段性目標，提升永續工作之有效性及效益最佳化，並以邁向淨零為最終目標，持續增強企業韌性與永續營運發展。

# 社會責任行動 
# 彰化銀行積極履行企業社會責任，透過多元化的公益活動回饋社會。公司持續推動「彰化銀行愛海守護行動」系列，辦理環境教育推廣講座及志工淨灘(溪)活動，並與高雄市野鳥學會合作「布袋鹽田濕地守護者 ESG 企業夥伴合作計畫」，共同維護棲地保育與生物多樣性，守護地球自然環境。

# 未來承諾 
# 展望未來，彰化銀行將持續推動及精進各項永續計畫，深化並拓展「4C 永續願景」內涵，促進永續金融發展之良性循環，與全球夥伴攜手打造與環境和平共存的永續未來，貢獻永續發展目標與淨零願景""")
# print("*前言*生成完成")

# with open("../output.txt", "w", encoding="utf-8") as f:
#     f.write(output)